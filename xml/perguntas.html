<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>CRUD Perguntas</title>
<script>
function enviarFormulario(event) {
  event.preventDefault();
  const formData = new FormData(event.target);
  const xhr = new XMLHttpRequest();
  xhr.open("POST", "perguntas_api.php", true);
  xhr.onload = function() {
    if (xhr.status === 200) {
      alert("Operação realizada!");
      carregarPerguntas();
      event.target.reset();
    }
  };
  xhr.send(formData);
}

function carregarPerguntas() {
  const xhr = new XMLHttpRequest();
  xhr.open("GET", "perguntas_api.php", true);
  xhr.onload = function() {
    if (xhr.status === 200) {
      document.getElementById("lista").innerHTML = xhr.responseText;
    }
  };
  xhr.send();
}

function deletar(id) {
  if (!confirm("Excluir?")) return;
  const xhr = new XMLHttpRequest();
  xhr.open("GET", "perguntas_api.php?del=" + id, true);
  xhr.onload = carregarPerguntas;
  xhr.send();
}

window.onload = carregarPerguntas;
</script>
</head>
<body>
<h2>CRUD de Perguntas</h2>
<form onsubmit="enviarFormulario(event)">
  <input type="hidden" name="acao" value="salvar">
  <label>pergunta 1: <input name="pergunta1"></label><br>
  <label>pergunta 2: <input name="pergunta2"></label><br>
  <label>pergunta 3: <input name="pergunta3"></label><br>
  <label>pergunta 4: <input name="pergunta4"></label><br>
  <select name="pergunta5" required>
    <option value="">Multipla escolha</option>
    <option>A</option><option>B</option><option>C</option><option>D</option>
  </select><br><br>
  <button>Salvar</button>
</form>

<hr>
<div id="lista"></div>
<p><a href="menu.html">Voltar ao Menu</a></p>
</body>
</html>
